
Так называется механизм, с помощью которого Го определяет где будет размещено значение: на стеке или в куче.

Можно запустить программу с флагом:

```bash
go run -gcflags=-m main.go
```

При этом после запуска в консоли выведется где память была выделена.

"Allocation" (выделение памяти) - относится только к размещению в куче. На стеке место выделяется сразу при компиляции.

При компиляции Го смотрит - будет ли данное значение использоваться за границами функции (например возвращаться). Если да - то размещаем в куче, если нет - на стеке.

Пример - выделяем на стеке, потому что получателю результата функции отдается копия структуры

```go
// user represents a user in the system.
type user struct {
name string
    email string
}
func stayOnStack() user {
    u := user{
        name:  "Bill",
        email: "bill@email.com",
    }
    return u 
}
```

Пример - выделяем в куче. Потому что возвращаем указатель на место в памяти

```go
type user struct {
    name  string
    email string
}
func escapeToHeap() *user {
    u := user{
        name:  "Bill",
        email: "bill@email.com",
    }
    return &u 
}
```

Стек функции - "само-очищающийся". При выходе из функции все данные из него удаляются (обнуляются) и при следующем заходе в функцию там будет "чисто". Без использования GC.