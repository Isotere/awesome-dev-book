# Awesome Dev Book / Architecture / System Design

***
[<<<Back](../INDEX.md)
***

## Rate Limiting

### Token Buckets

Допустим, что для доступа к ресурсу у нас есть _access token_. Без него доступ запрещен. И допустим, что эти токены
хранятся в "корзине", ожидая когда их запросят для доступа к ресурсу. У корзины есть емкость d, означающая, что она 
может хранить d токенов в момент времени. И каждый раз при запросе вы забираете один токен из корзины. И до тех пор, пока они 
там есть - вы можете выполнить запрос, если же "свободных" токенов нет - то мы становимся либо в очередь ожидания либо отклоняем 
запрос. 

В этом алгоритме мы также определяем r, которая будет определять rate того, как токены будут добавляться обратно в корзину. 
Она может быть равна одной наносекунде либо 1 секунде. Зависит от... 

Т.е. мы имеем: 

- d - которая определяет сколько токенов будет доступно немедленно
- r - которая определяет с какой скоростью (как часто) будут добавляться новые токены

[Пример реализации на Go](../../../../code/go_lang/use_cases/rate_limiter2)



