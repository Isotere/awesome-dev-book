1. Есть внешний сервис, каждый запрос к которому стоит денег и выполняется 10сек

Нужно минимизировать походы туда: 

(внешний сервис идемпотентен)

1. Сделать кеш по хешу запроса с результатом 
2. Обеспечить запись и чтение потоко-безопасностью
3. Не разрешать делать повторный запрос в сервис, если он уже выполняется (можно реализовать с помощью in-memory очереди, тоже потоко-безопасной)